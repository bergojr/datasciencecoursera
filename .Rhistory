X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 150)
corr <- function(directory, threshold =0 ){
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
cr <- vector()
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr <- function(directory, threshold =0 ){
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
cr <- vector()
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 150)
summary(cr)
cr<- corr(diretorio, 150)
head(cr)
summary(cr)
cr<- corr(diretorio, 400)
head(cr)
summary(cr)
corr(di)
corr(diretorio, 5000)
corr(di)
corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
print(filestoread)
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
print(is.null(filestoread))
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
print(set.selectedstations)
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 5000)
?any
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
print(set.selectedstations)
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
print(any(set.selectedstations))
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
corr(diretorio, 5000)
cr
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
print(set.selectedstations)
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
print(any(set.selectedstations))
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
corr(diretorio, 5000)
summary(cr)
cr <- corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
summary(cr)
corr <- function(directory, threshold =0 ){
cr <- c(0)
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
summary(cr)
corr <- function(directory, threshold =0 ){
#cr <- c(0)
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
cr
summary(cr)
length(cr)
cr <- corr(diretorio, 5000)
complete_station_data <- function(directory, id = 1:332){
filestoread <- list.files(directory,full.names = TRUE)
validstations <- vector()
validmeasurements <- vector()
for (station in id) {
rawobs <- read.csv(filestoread[station])
validobs <- complete.cases(rawobs)
completeobs <- rawobs[validobs, ]
nobs = nrow(completeobs)
validstations <- c(validstations,station)
validmeasurements <- c(validmeasurements,nobs)
}
stationsmeasurements <-  as.data.frame(cbind(validstations, validmeasurements))
colnames(stationsmeasurements) <- c("id","nobs")
stationsmeasurements
}
corr <- function(directory, threshold =0 ){
#cr <- c(0)
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
diretorio <- "C:/coursera/Coursera_DS/specdata"
cr <- corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vetor()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
corr <- function(directory, threshold =0 ){
cr <- vector()
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
cr
summary(cr)
length(cr)
corr <- function(directory, threshold =0 ){
cr <- as.numeric(vector())
# selecionando quais serão as estações lidas
Complete_stations <- complete_station_data(directory)
set.selectedstations <- Complete_stations$nobs > threshold
selectedstations <- Complete_stations [set.selectedstations, ]
set.filestoread <- selectedstations$id
if(any(set.selectedstations)){
# selecionando os aquivos que serão consultados
allfiles <- list.files(directory,full.names = TRUE)
filestoread <- allfiles[set.filestoread]
# calculando a correlacao em cada dataset selecionado
for (i in 1:length(filestoread)){
station.data <- read.csv(filestoread[i])
valid.station.data <- complete.cases(station.data)
complete.station.data <- as.data.frame(station.data[valid.station.data,])
X <- complete.station.data$nitrate
Y <- complete.station.data$sulfate
cr[i] <- cor(X,Y)
}
cr
}
cr
}
cr <- corr(diretorio, 5000)
summary(cr)
length(cr)
cr <- corr(diretorio)
summary(cr)
length(cr)
pollutantmean <- function(directory, pollutant, id = 1:332){
filestoread <- list.files(directory,full.names = TRUE)
stationsmeasurements <- vector()
for (station in id) {
measurement <- read.csv(filestoread[station])
pollutdata <- measurement[pollutant]
pollutdatavalid <- pollutdata[!is.na(pollutdata)]
stationsmeasurements <- c(stationsmeasurements, pollutdatavalid)
}
mean(stationsmeasurements)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "sulfate", 1:10)
getwd()
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
complete_station_data <- function(directory, id = 1:332){
filestoread <- list.files(directory,full.names = TRUE)
validstations <- vector()
validmeasurements <- vector()
for (station in id) {
rawobs <- read.csv(filestoread[station])
validobs <- complete.cases(rawobs)
completeobs <- rawobs[validobs, ]
nobs = nrow(completeobs)
validstations <- c(validstations,station)
validmeasurements <- c(validmeasurements,nobs)
}
stationsmeasurements <-  as.data.frame(cbind(validstations, validmeasurements))
colnames(stationsmeasurements) <- c("id","nobs")
stationsmeasurements
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
complete <- function(directory, id = 1:332){
filestoread <- list.files(directory,full.names = TRUE)
validstations <- vector()
validmeasurements <- vector()
for (station in id) {
rawobs <- read.csv(filestoread[station])
validobs <- complete.cases(rawobs)
completeobs <- rawobs[validobs, ]
nobs = nrow(completeobs)
validstations <- c(validstations,station)
validmeasurements <- c(validmeasurements,nobs)
}
stationsmeasurements <-  as.data.frame(cbind(validstations, validmeasurements))
colnames(stationsmeasurements) <- c("id","nobs")
stationsmeasurements
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
RNGversion("3.5.1")
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
x <- list (a=1:5 , b = rnorm(10))
lapply(x, mean)
x$a
x <- 1:4
lapply(x, runif)
b<- lapply(x, runif)
b
class(b)
b[1]
b[2]
x <- 1:4
lapply(x, runif, min = 0 , max=10)
x <- list(a = matrix(1:4,2,2), b = matrix(1:6, 3, 2))
x[,1]
x
x$a[,1]
lapply(x, function(elt) elt[,1])
